<h1>Flight Edit</h1>

<p>Id: {{ id }}</p>
<p>ShowDetail: {{ showDetails }}</p>

<button class="btn btn-warning" (click)="onRoute()">Route</button>

<div>
  <div *ngIf="isLoading" class="spinner-border text-secondary mt-3 ml-3" style="width: 3rem; height: 3rem" role="status">
    <span class="sr-only">Loading...</span>
  </div>
</div>

<pre *ngIf="isLoaded">{{ flight | json }}</pre>

<form [formGroup]="editForm">
  <div class="form-group">
    <label>Id:</label>
    <input formControlName="id" class="form-control" />
  </div>

  <app-flight-validation-errors [errors]="editForm.controls.id.errors" fieldLabel="Id" />

  <div class="form-group">
    <label>From:</label>
    <input formControlName="from" class="form-control" />
  </div>

  <app-flight-validation-errors
    *ngIf="editForm.controls.from.dirty"
    [errors]="editForm.controls.from.errors"
    [pending]="editForm.controls.from.pending"
    fieldLabel="From"
  />

  <div class="form-group">
    <label>To:</label>
    <input formControlName="to" class="form-control" />
  </div>

  <app-flight-validation-errors
    *ngIf="editForm.controls.to.dirty"
    [errors]="editForm.controls.to.errors"
    [pending]="editForm.controls.to.pending"
    fieldLabel="To" />

  <div class="form-group">
    <label>Date:</label>
    <input formControlName="date" class="form-control" />
  </div>

  <app-flight-validation-errors
    *ngIf="editForm.controls.date.dirty"
    [errors]="editForm.controls.date.errors"
    [pending]="editForm.controls.date.pending"
    fieldLabel="Date" />

  <app-flight-validation-errors
    *ngIf="editForm.dirty"
    [errors]="editForm.errors"
    [pending]="editForm.pending"
    fieldLabel="Form" />

  <div class="form-group">
    <button (click)="save()" class="btn btn-default">Save</button>
  </div>
</form>

<div *ngIf="showWarning" class="alert alert-warning" style="z-index: 99999">
  <p>Data not saved. Do you really want to leave me?</p>
  <p>
    <button class="btn btn-default" (click)="decide(true)">Yes</button>
    <button class="btn btn-default" (click)="decide(false)">No</button>
  </p>
</div>
